#!/bin/bazz

# File Name:framework.zz
# Description: framework function
# @Author: evil
# Created Time:Fri 26 Dec 2014 08:48:05 PM CST

get_root_dir(){
  if [ !$ROOT_DIR ];then
     ROOT_DIR=`pwd`
  fi
}
get_current_sys(){
    if which apt-get > /dev/null 2>&1; then
        SYSTEM="Ubuntu"
        cat /proc/cpuinfo
    elif which yum > /dev/null 2>&1; then
        SYSTEM="Centos"
    else
        SYSTEM="Macos"
    fi
}
#是否调试
debug(){
    DEBUG=$1;
}
#调度日志
log(){
    msg=$1
    if [ $DEBUG = true ]; then
    echo "${msg}"
fi
}
error(){
    echo "$1"
    exit 1
}
#调用函数
load_function(){
for file in $*
do
  if [[ -d ${file} ]]; then
      load_function "${file}/*" 
  elif [ -s ${file} ] &&  [ ${file##*.} = 'zz' ];then
      log "import file ${file}"
      . ${file}
  fi 
  done
}
#执行命令
dexec(){
    exef=$1
    dexef=Module/${SYSTEM}/$1
    . ${dexef}
}
#获取程序根目录
get_root_dir
#获取当前系统
get_current_sys
#默认关闭DEBUG
debug false 
